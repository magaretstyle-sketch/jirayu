<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Rutherford Realm</title>

<style>
  body {
    background: #1e1e1e;
    color: white;
    font-family: Arial;
    text-align: center;
  }
  canvas {
    background: #87ceeb;
    border: 3px solid white;
    display: block;
    margin: 10px auto;
  }
  .ui {
    margin-top: 10px;
  }
  button {
    width: 80%;
    max-width: 400px;
    padding: 12px;
    margin: 6px auto;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
  }
</style>
</head>

<body>

<h1>üåå Rutherford Realm</h1>
<p>‚ù§Ô∏è HP: <span id="hp">3</span> | ‚≠ê Score: <span id="score">0</span></p>

<canvas id="game" width="800" height="400"></canvas>

<div class="ui" id="choices"></div>

<script>
/* ========= ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å ========= */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function clickSound() {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value = 500;
  osc.start();
  gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.2);
  osc.stop(audioCtx.currentTime + 0.2);
}

/* ========= Canvas ========= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ========= ‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ========= */
let questIndex = 0;
let score = 0;
let hp = 3;
let transitioning = false;

/* ========= ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ========= */
const quests = [
  {
    q: "‡∏≠‡∏∞‡∏ï‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏ó‡∏≠‡∏°‡∏™‡∏±‡∏ô‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
    c: [
      "‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡∏ï‡∏±‡∏ô",
      "‡∏õ‡∏£‡∏∞‡∏à‡∏∏‡∏ö‡∏ß‡∏Å‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ï‡∏£‡∏≠‡∏ô‡∏ù‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà",
      "‡∏°‡∏µ‡∏ô‡∏¥‡∏ß‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏™‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á"
    ],
    a: 1
  },
  {
    q: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡πÅ‡∏≠‡∏•‡∏ü‡∏≤‡πÉ‡∏™‡πà‡πÅ‡∏ú‡πà‡∏ô‡∏ó‡∏≠‡∏á ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£?",
    c: [
      "‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö",
      "‡∏ó‡∏∞‡∏•‡∏∏‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ",
      "‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"
    ],
    a: 1
  },
  {
    q: "‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏∂‡∏á‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö?",
    c: [
      "‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ô‡∏¥‡∏ß‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏™‡πÄ‡∏•‡πá‡∏Å‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô",
      "‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á",
      "‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ï‡∏£‡∏≠‡∏ô‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô"
    ],
    a: 0
  },
  {
    q: "‡∏≠‡∏∞‡∏ï‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏£‡∏±‡∏ó‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
    c: [
      "‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡∏ï‡∏±‡∏ô",
      "‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á",
      "‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏∏‡∏•‡∏ö"
    ],
    a: 1
  },
  {
    q: "‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏î?",
    c: [
      "‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏∞‡∏ï‡∏≠‡∏°",
      "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á",
      "‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á"
    ],
    a: 0
  }
];

/* ========= ‡∏ß‡∏≤‡∏î‡∏â‡∏≤‡∏Å ========= */
function drawScene(text) {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤
  ctx.fillStyle = "#87ceeb";
  ctx.fillRect(0,0,800,400);

  // ‡∏û‡∏∑‡πâ‡∏ô
  ctx.fillStyle = "#2e8b57";
  ctx.fillRect(0,330,800,70);

  // ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
  ctx.fillStyle = "yellow";
  ctx.fillRect(120,260,40,70);

  // NPC
  ctx.fillStyle = "purple";
  ctx.fillRect(600,260,40,70);

  // ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
  ctx.fillStyle = "rgba(0,0,0,0.7)";
  ctx.fillRect(50,30,700,140);

  ctx.fillStyle = "white";
  ctx.font = "18px Arial";
  ctx.fillText("‡∏£‡∏±‡∏ó‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏î:", 70, 60);
  ctx.fillText(text, 70, 95);
}

/* ========= ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ========= */
function showQuest() {
  drawScene(quests[questIndex].q);

  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";

  quests[questIndex].c.forEach((choice, index) => {
    const btn = document.createElement("button");
    btn.innerText = choice;
    btn.onclick = () => selectChoice(index);
    choicesDiv.appendChild(btn);
  });
}

/* ========= ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ========= */
function selectChoice(choice) {
  if (transitioning) return;
  clickSound();

  if (choice === quests[questIndex].a) {
    score += 10;
    questIndex++;
    updateUI();

    if (questIndex >= quests.length) {
      endGame(true);
    } else {
      transition("‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô! ‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≠...");
    }
  } else {
    hp--;
    updateUI();
    transition("‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏•‡∏î! ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏µ...");

    if (hp <= 0) {
      endGame(false);
    }
  }
}

/* ========= ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏â‡∏≤‡∏Å ========= */
function transition(text) {
  transitioning = true;
  drawScene(text);
  document.getElementById("choices").innerHTML = "";

  setTimeout(() => {
    transitioning = false;
    showQuest();
  }, 1200);
}

/* ========= ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ========= */
function updateUI() {
  document.getElementById("score").innerText = score;
  document.getElementById("hp").innerText = hp;
}

/* ========= ‡∏à‡∏ö‡πÄ‡∏Å‡∏° ========= */
function endGame(win) {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  document.getElementById("choices").innerHTML = "";

  ctx.fillStyle = "black";
  ctx.font = "28px Arial";

  if (win) {
    ctx.fillText("üéâ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", 280, 180);
  } else {
    ctx.fillText("üíÄ ‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏´‡∏°‡∏î", 280, 180);
  }

  ctx.font = "22px Arial";
  ctx.fillText("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: " + score, 300, 230);
}

/* ========= ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ========= */
showQuest();
</script>

</body>
</html>
